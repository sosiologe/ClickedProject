<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CP V1.01</title>
    
    <script>
        // –í–µ—Ä—Å–∏—è V1.01 - –ù–ï –ú–ï–ù–Ø–¢–¨!
        window.SKINS = [
            { id: 'default', name: '–ö–ª–∞—Å—Å–∏–∫–∞', color: 'linear-gradient(135deg, #40BFFF, #0099ff)', price: 0 },
            { id: 'black', name: '–ß–µ—Ä–Ω—ã–π', color: '#1a1a1a', price: 100 },
            { id: 'gold_act', name: '–ó–æ–ª–æ—Ç–æ (–ê–ö–¶–ò–Ø)', color: 'linear-gradient(135deg, #ffd700, #ff8c00)', price: 1 },
            { id: 'ruby', name: '–†—É–±–∏–Ω', color: 'linear-gradient(135deg, #cb2d3e, #ef473a)', price: 200 },
            { id: 'emerald', name: '–ò–∑—É–º—Ä—É–¥', color: 'linear-gradient(135deg, #2ecc71, #27ae60)', price: 350 },
            { id: 'neon', name: '–ù–µ–æ–Ω', color: 'linear-gradient(135deg, #ff00ff, #00ffff)', price: 500 },
            { id: 'mint', name: '–ú—è—Ç–∞', color: '#00FFCC', price: 250 },
            { id: 'frost', name: '–ú–æ—Ä–æ–∑', color: 'linear-gradient(135deg, #00d2ff, #928dab)', price: 300 },
            { id: 'sunset', name: '–ó–∞–∫–∞—Ç', color: 'linear-gradient(135deg, #f12711, #f5af19)', price: 400 },
            { id: 'lavender', name: '–õ–∞–≤–∞–Ω–¥–∞', color: 'linear-gradient(135deg, #834d9b, #d04ed6)', price: 450 },
            { id: 'forest', name: '–õ–µ—Å', color: 'linear-gradient(135deg, #134e5e, #71b280)', price: 550 },
            { id: 'space', name: '–ö–æ—Å–º–æ—Å', color: 'linear-gradient(135deg, #000046, #1cb5e0)', price: 600 },
            { id: 'fire', name: '–û–≥–æ–Ω—å', color: 'linear-gradient(135deg, #ed1c24, #fcee21)', price: 700 },
            { id: 'midnight', name: '–ü–æ–ª–Ω–æ—á—å', color: 'linear-gradient(135deg, #020024, #090979)', price: 850 },
            { id: 'candy', name: '–ö–æ–Ω—Ñ–µ—Ç–∞', color: 'linear-gradient(135deg, #ff9a9e, #fecfef)', price: 900 },
            { id: 'ocean', name: '–û–∫–µ–∞–Ω', color: 'linear-gradient(135deg, #2b5876, #4e4376)', price: 1100 },
            { id: 'toxic', name: '–¢–æ–∫—Å–∏–∫', color: 'linear-gradient(135deg, #11998e, #38ef7d)', price: 1300 },
            { id: 'cherry', name: '–í–∏—à–Ω—è', color: 'linear-gradient(135deg, #eb3349, #f45c43)', price: 1400 },
            { id: 'titan', name: '–¢–∏—Ç–∞–Ω', color: 'linear-gradient(135deg, #283048, #859398)', price: 1600 },
            { id: 'rose', name: '–†–æ–∑–∞', color: 'linear-gradient(135deg, #e94e84, #ff8a8a)', price: 1700 },
            { id: 'sun', name: '–°–æ–ª–Ω—Ü–µ', color: 'linear-gradient(135deg, #f7ff00, #dbdb81)', price: 1800 },
            { id: 'void', name: '–ü—É—Å—Ç–æ—Ç–∞', color: 'linear-gradient(135deg, #0f0c29, #302b63)', price: 3000 },
            { id: 'plasma', name: '–ü–ª–∞–∑–º–∞', color: 'linear-gradient(135deg, #e65c00, #F9D423)', price: 4000 },
            { id: 'nebula', name: '–¢—É–º–∞–Ω–Ω–æ—Å—Ç—å', color: 'linear-gradient(135deg, #6441a5, #2a0845)', price: 0 },
            { id: 'galaxy', name: '–ì–∞–ª–∞–∫—Ç–∏–∫–∞', color: 'linear-gradient(45deg, #2f0743, #41295a)', price: 10000 },
            { id: 'cyber', name: '–ö–∏–±–µ—Ä', color: 'linear-gradient(90deg, #3f5efb, #fc466b)', price: 2500 },
            { id: 'lemon', name: '–õ–∏–º–æ–Ω', color: '#d4fc79', price: 150 },
            { id: 'deep', name: '–ì–ª—É–±–∏–Ω–∞', color: '#243949', price: 1200 },
            { id: 'magic', name: '–ú–∞–≥–∏—è', color: 'linear-gradient(to top, #30cfd0 0%, #330867 100%)', price: 3300 },
            { id: 'winter_lord', name: '–ó–∏–º–Ω–∏–π –õ–æ—Ä–¥', color: 'linear-gradient(135deg, #667eea, #764ba2)', price: 0, bp: true }
        ];

        window.db = JSON.parse(localStorage.getItem('cp_v101_final')) || { score:0, coins:0, ccoins:0, clicks:0, up:1, plus:false, skin:'default', owned:['default'], promos:[] };
        window.save = () => localStorage.setItem('cp_v101_final', JSON.stringify(window.db));

        window.getRanks = () => {
            const c = Number(window.db.clicks);
            if (c >= 50000) return { name: '–õ–ï–ì–ï–ù–î–ê', icon: 'üëë', color: '#ff4757' };
            if (c >= 20000) return { name: '–ê–õ–ú–ê–ó', icon: 'üíé', color: '#70a1ff' };
            if (c >= 10000) return { name: '–ü–õ–ê–¢–ò–ù–ê', icon: 'üõ°Ô∏è', color: '#eccc68' };
            if (c >= 5000) return { name: '–ó–û–õ–û–¢–û', icon: 'ü•á', color: '#ffa502' };
            if (c >= 2000) return { name: '–°–ï–†–ï–ë–†–û', icon: 'ü•à', color: '#ced6e0' };
            if (c >= 1000) return { name: '–ë–†–û–ù–ó–ê', icon: 'ü•â', color: '#a29bfe' };
            return { name: '–ù–û–í–ò–ß–û–ö', icon: 'üë∂', color: '#7bed9f' };
        };

        window.toggleTheme = () => {
            const body = document.body;
            const next = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', next);
            localStorage.setItem('cp_theme', next);
        };

        window.toggleMusic = () => {
            const m = document.getElementById('bg-music');
            if (m.paused) m.play().catch(() => {});
            else m.pause();
        };

        window.updateUI = () => {
            document.getElementById('score').textContent = Number(window.db.score).toLocaleString();
            document.getElementById('coins').textContent = Number(window.db.coins).toLocaleString();
            document.getElementById('ccoins').textContent = Number(window.db.ccoins).toLocaleString();
            document.getElementById('up-btn').textContent = window.db.up >= 5 ? "–ú–ê–ö–°" : `–£–ª—É—á—à–∏—Ç—å (${window.db.up*500} üí∞)`;
            
            const rank = window.getRanks();
            const rEl = document.getElementById('rank-display');
            rEl.innerHTML = `${rank.icon} ${rank.name}`;
            rEl.style.color = rank.color;

            const sk = window.SKINS.find(x => x.id === window.db.skin) || window.SKINS[0];
            document.getElementById('click-button').style.background = sk.color;

            const lvl = Math.floor(Number(window.db.clicks) / 500);
            const prog = Number(window.db.clicks) % 500;
            document.getElementById('bp-bar-fill').style.width = (prog / 5) + '%';
            document.getElementById('bp-lvl-display').textContent = lvl;
            document.getElementById('bp-prog-text').textContent = prog;

            if(lvl >= 67 && window.db.plus && !window.db.owned.includes('winter_lord')) {
                window.db.owned.push('winter_lord');
                window.save();
            }
        };

        window.doClick = (e) => {
            if(e) e.preventDefault();
            const p = window.db.up === 5 ? 10 : window.db.up;
            window.db.score += p; window.db.coins += p; window.db.clicks += p;
            
            const a = document.createElement('div'); a.className = 'click-anim'; a.textContent = `+${p}`;
            const cx = e.clientX || (e.touches ? e.touches[0].clientX : window.innerWidth/2);
            const cy = e.clientY || (e.touches ? e.touches[0].clientY : window.innerHeight/2);
            a.style.left = cx + 'px'; a.style.top = cy + 'px';
            document.body.appendChild(a); setTimeout(() => a.remove(), 600);
            
            window.save(); window.updateUI();
        };

        window.showScreen = (id) => {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'bp-screen') window.renderBP();
            if(id === 'skin-screen') window.renderSkins();
        };

        window.renderBP = () => {
            const list = document.getElementById('bp-list');
            const curLvl = Math.floor(Number(window.db.clicks) / 500);
            document.getElementById('bp-plus-btn').textContent = window.db.plus ? "–ë–ü+ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù" : "–ö–£–ü–ò–¢–¨ –ë–ü+ (119 üíé)";
            let html = '';
            for(let i = 1; i <= 67; i++) {
                const isReached = i <= curLvl;
                const isLast = i === 67;
                html += `<div class="bp-level-row">
                    <div class="bp-reward-card ${isReached ? '' : 'locked'}">üí∞ 100</div>
                    <div class="bp-level-circle">${i}</div>
                    <div class="bp-reward-card premium ${isReached && window.db.plus ? '' : 'locked'}">
                        ${isLast ? '‚ùÑÔ∏è –õ–û–†–î' : 'üíé 20'}
                    </div>
                </div>`;
            }
            list.innerHTML = html;
        };

        window.renderSkins = () => {
            const l = document.getElementById('skin-list');
            let html = '';
            window.SKINS.filter(s => !s.bp || window.db.owned.includes(s.id)).forEach(s => {
                const has = window.db.owned.includes(s.id), act = window.db.skin === s.id;
                html += `<div class="skin-card">
                    <div class="skin-preview" style="background:${s.color}"></div>
                    <div class="skin-name">${s.name}</div>
                    <button onclick="window.setSkin('${s.id}', ${s.price})" class="skin-btn ${act?'active':''}">
                        ${act?'–ê–ö–¢.':(has?'–í–´–ë–û–†':s.price+' üíé')}
                    </button>
                </div>`;
            });
            l.innerHTML = html;
        };

        window.setSkin = (id, p) => {
            if(window.db.owned.includes(id)) window.db.skin = id;
            else if(window.db.ccoins >= p) { window.db.ccoins -= p; window.db.owned.push(id); window.db.skin = id; }
            window.save(); window.updateUI(); window.renderSkins();
        };

        window.buyLevel = () => { if(window.db.ccoins >= 30) { window.db.ccoins -= 30; window.db.clicks += 500; window.save(); window.updateUI(); window.renderBP(); }};
        window.buyPlus = () => { if(!window.db.plus && window.db.ccoins >= 119) { window.db.ccoins -= 119; window.db.plus = true; window.save(); window.updateUI(); window.renderBP(); }};
        window.buyUp = () => { let c = window.db.up*500; if(window.db.up<5 && window.db.coins>=c){ window.db.coins-=c; window.db.up++; window.save(); window.updateUI(); }};
        
        window.openCase = () => {
            if(window.db.ccoins < 100) return alert("–ú–∞–ª–æ üíé");
            window.db.ccoins -= 100;
            const pool = window.SKINS.filter(s => !s.bp);
            const win = pool[Math.floor(Math.random()*pool.length)];
            if(!window.db.owned.includes(win.id)) window.db.owned.push(win.id);
            alert("–í—ã–ø–∞–ª: " + win.name); window.save(); window.updateUI();
        };

        window.usePromo = () => {
            const v = document.getElementById('promo-input').value.toUpperCase().trim();
            if(window.db.promos.includes(v)) return alert("–£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!");
            let msg = "";
            if(v === 'START') { window.db.coins += 5000; msg = "üí∞ +5,000 –º–æ–Ω–µ—Ç!"; }
            else if(v === 'CCOIN') { window.db.ccoins += 100; msg = "üíé +100!"; }
            else if(v === 'MILLION') { window.db.ccoins += 1000000; msg = "üíé +1,000,000 CCoin!"; } // –ù–∞—à –Ω–æ–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
            else if(v === 'GIFT') { window.db.ccoins += 500; msg = "üíé +500!"; }
            else if(v === 'WINTER2025') { window.db.ccoins += 1000; msg = "üíé +1000!"; }
            else if(v === 'LORD') { if(!window.db.owned.includes('winter_lord')) window.db.owned.push('winter_lord'); msg = "‚ùÑÔ∏è –°–∫–∏–Ω –õ–æ—Ä–¥ –ø–æ–ª—É—á–µ–Ω!"; }
            else if(v === 'COINS') { window.db.coins += 50000; msg = "üí∞ +50,000!"; }
            else { return alert("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!"); }
            window.db.promos.push(v); alert(msg); window.save(); window.updateUI();
        };

        window.onload = () => {
            const t = localStorage.getItem('cp_theme') || 'dark';
            document.body.setAttribute('data-theme', t);
            window.updateUI();
        };
    </script>

    <style>
        /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Poppins:wght@400;700&display=swap');
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --primary: #38bdf8; --ccoin: #2dd4bf; --border: rgba(255,255,255,0.1); }
        body[data-theme="light"] { --bg: #f1f5f9; --card: #ffffff; --text: #1e293b; --border: rgba(0,0,0,0.05); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; user-select: none; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }
        
        .top-controls { position: fixed; top: 10px; right: 10px; display: flex; gap: 8px; z-index: 100; }
        .control-btn { width: 40px; height: 40px; border-radius: 12px; background: var(--card); border: 1px solid var(--border); display: flex; justify-content: center; align-items: center; cursor: pointer; color: var(--text); }
        .control-btn svg { width: 20px; height: 20px; fill: currentColor; }

        .screen { display: none; width: 100%; height: 100%; position: absolute; padding: 60px 15px 20px; overflow-y: auto; flex-direction: column; align-items: center; }
        .active { display: flex; }
        .main-card { background: var(--card); width: 100%; padding: 20px; border-radius: 25px; text-align: center; border: 1px solid var(--border); margin-bottom: 15px; }
        .score-display { font-family: 'Montserrat'; font-size: 45px; color: var(--primary); }
        
        #rank-display { font-weight: 900; font-size: 16px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }

        #click-button { width: 160px; height: 160px; border-radius: 50%; border: 8px solid var(--bg); background: var(--primary); color: white; font-weight: 900; font-size: 24px; margin: 10px auto; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); transition: 0.1s; }
        #click-button:active { transform: scale(0.92); }

        .btn-action { width: 100%; padding: 16px; border-radius: 18px; border: none; font-weight: 700; background: var(--card); color: var(--text); border: 1px solid var(--border); margin-bottom: 10px; cursor: pointer; }
        .skin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; padding-bottom: 20px; }
        .skin-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .skin-preview { width: 50px; height: 50px; border-radius: 50%; margin-bottom: 8px; }
        .skin-btn { width: 100%; padding: 8px; border-radius: 10px; border: none; background: #2d3436; color: white; font-size: 10px; font-weight: 700; }
        .skin-btn.active { background: var(--primary); }
        .bp-level-row { display: grid; grid-template-columns: 1fr 40px 1fr; gap: 10px; width: 100%; align-items: center; margin-bottom: 10px; }
        .bp-reward-card { background: var(--card); padding: 12px; border-radius: 15px; text-align: center; font-size: 12px; font-weight: 700; }
        .bp-level-circle { background: var(--text); color: var(--bg); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; margin: auto; }
        .locked { opacity: 0.3; }
        .bp-bar { width: 100%; height: 10px; background: rgba(0,0,0,0.2); border-radius: 5px; overflow: hidden; margin: 10px 0; }
        #bp-bar-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
        .click-anim { position: fixed; pointer-events: none; color: var(--primary); font-weight: 900; font-size: 30px; animation: floatUp 0.6s forwards; z-index: 1000; }
        @keyframes floatUp { from { opacity: 1; transform: translate(-50%, 0); } to { opacity: 0; transform: translate(-50%, -100px); } }
    </style>
</head>
<body data-theme="dark">
    <audio id="bg-music" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"></audio>
    
    <div class="top-controls">
        <div class="control-btn" onclick="window.toggleMusic()">
            <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        </div>
        <div class="control-btn" onclick="window.toggleTheme()">
            <svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>
        </div>
    </div>

    <div id="main-screen" class="screen active">
        <h2 style="color:var(--primary)">ClickedProject</h2>
        <div class="main-card">
            <div id="score" class="score-display">0</div>
            <div style="margin: 10px 0;">
                <span style="color:orange">üí∞ <span id="coins">0</span></span>
                <span style="color:var(--ccoin); margin-left:15px;">üíé <span id="ccoins">0</span></span>
            </div>
            
            <div id="rank-display">üë∂ –ù–û–í–ò–ß–û–ö</div>
            
            <button id="click-button" onpointerdown="window.doClick(event)">–ö–õ–ò–ö!</button>
            <div onclick="window.showScreen('skin-screen')" style="font-weight:700; opacity:0.7; cursor:pointer;">–ì–ê–†–î–ï–†–û–ë üëï</div>
        </div>
        <button id="up-btn" class="btn-action" onclick="window.buyUp()">–£–ª—É—á—à–∏—Ç—å</button>
        <button class="btn-action" style="background:var(--ccoin); color:black;" onclick="window.showScreen('case-screen')">–ö–ï–ô–° (100 üíé)</button>
        <button class="btn-action" style="background:#3b82f6; color:white;" onclick="window.showScreen('bp-screen')">WINTER PASS üéÑ</button>
        <button class="btn-action" style="background:#f59e0b; color:white;" onclick="window.showScreen('promo-screen')">–ü–†–û–ú–û–ö–û–î üéÅ</button>
    </div>

    <div id="promo-screen" class="screen">
        <h2>–ü–†–û–ú–û–ö–û–î</h2>
        <div class="main-card">
            <input type="text" id="promo-input" placeholder="–í–í–ï–î–ò –ö–û–î" style="width:100%; padding:15px; border-radius:15px; border:1px solid var(--border); background:rgba(0,0,0,0.1); color:var(--text); text-align:center;">
            <button class="btn-action" style="background:var(--primary); color:white; margin-top:15px;" onclick="window.usePromo()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
        </div>
        <button class="btn-action" onclick="window.showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="bp-screen" class="screen">
        <h2>WINTER PASS</h2>
        <div class="main-card">
            <div style="display:flex; justify-content:space-between; font-size:12px;">
                <span>–£—Ä. <span id="bp-lvl-display">0</span></span>
                <span><span id="bp-prog-text">0</span> / 500 XP</span>
            </div>
            <div class="bp-bar"><div id="bp-bar-fill"></div></div>
            <button id="bp-plus-btn" class="btn-action" style="background:gold; color:black;" onclick="window.buyPlus()">–ö–£–ü–ò–¢–¨ –ë–ü+</button>
            <button class="btn-action" style="background:var(--ccoin); color:black;" onclick="window.buyLevel()">–ö–£–ü–ò–¢–¨ –£–†–û–í–ï–ù–¨ (30 üíé)</button>
        </div>
        <div id="bp-list" style="width:100%"></div>
        <button class="btn-action" onclick="window.showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="skin-screen" class="screen">
        <h2>–ì–ê–†–î–ï–†–û–ë</h2>
        <div id="skin-list" class="skin-grid"></div>
        <button class="btn-action" onclick="window.showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="case-screen" class="screen">
        <h2>–ö–ï–ô–°–´</h2>
        <div class="main-card">
            <div style="font-size:100px;">üì¶</div>
            <button class="btn-action" style="background:var(--ccoin); color:black; margin-top:20px;" onclick="window.openCase()">–û–¢–ö–†–´–¢–¨</button>
        </div>
        <button class="btn-action" onclick="window.showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>
</body>
  </html>
