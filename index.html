<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CP V1.01 Final SVG</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Poppins:wght@400;700&display=swap');
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --primary: #38bdf8; --ccoin: #2dd4bf; --border: rgba(255,255,255,0.1); }
        body[data-theme="light"] { --bg: #f1f5f9; --card: #ffffff; --text: #1e293b; --border: rgba(0,0,0,0.05); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; user-select: none; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; position: relative; }
        .top-controls { position: fixed; top: 10px; right: 10px; display: flex; gap: 8px; z-index: 100; }
        .control-btn { width: 40px; height: 40px; border-radius: 12px; background: var(--card); border: 1px solid var(--border); display: flex; justify-content: center; align-items: center; cursor: pointer; color: var(--text); }
        .control-btn svg { width: 20px; height: 20px; fill: currentColor; }
        .screen { display: none; width: 100%; height: 100%; position: absolute; padding: 60px 15px 20px; overflow-y: auto; flex-direction: column; align-items: center; background: var(--bg); }
        .active { display: flex; }
        .main-card { background: var(--card); width: 100%; padding: 20px; border-radius: 25px; text-align: center; border: 1px solid var(--border); margin-bottom: 15px; }
        .score-display { font-family: 'Montserrat'; font-size: 45px; color: var(--primary); }
        #rank-display { font-weight: 900; font-size: 16px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        #click-button { width: 160px; height: 160px; border-radius: 50%; border: 8px solid var(--bg); background: var(--primary); color: white; font-weight: 900; font-size: 24px; margin: 10px auto; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); transition: 0.1s; touch-action: manipulation; }
        #click-button:active { transform: scale(0.92); }
        .btn-action { width: 100%; padding: 16px; border-radius: 18px; border: none; font-weight: 700; background: var(--card); color: var(--text); border: 1px solid var(--border); margin-bottom: 10px; cursor: pointer; }
        .skin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; padding-bottom: 20px; }
        .skin-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .skin-preview { width: 50px; height: 50px; border-radius: 50%; margin-bottom: 8px; }
        .skin-btn { width: 100%; padding: 8px; border-radius: 10px; border: none; background: #2d3436; color: white; font-size: 10px; font-weight: 700; }
        .skin-btn.active { background: var(--primary); }
        .bp-level-row { display: grid; grid-template-columns: 1fr 40px 1fr; gap: 10px; width: 100%; align-items: center; margin-bottom: 10px; }
        .bp-reward-card { background: var(--card); padding: 12px; border-radius: 15px; text-align: center; font-size: 12px; font-weight: 700; }
        .bp-level-circle { background: var(--text); color: var(--bg); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; margin: auto; }
        .locked { opacity: 0.3; }
        .bp-bar { width: 100%; height: 10px; background: rgba(0,0,0,0.2); border-radius: 5px; overflow: hidden; margin: 10px 0; }
        #bp-bar-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
        .click-anim { position: fixed; pointer-events: none; color: var(--primary); font-weight: 900; font-size: 30px; animation: floatUp 0.6s forwards; z-index: 1000; }
        @keyframes floatUp { from { opacity: 1; transform: translate(-50%, 0); } to { opacity: 0; transform: translate(-50%, -100px); } }
    </style>
</head>
<body data-theme="dark">
    <audio id="bg-music" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"></audio>
    
    <div class="top-controls">
        <div class="control-btn" onclick="toggleMusic()">
            <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        </div>
        <div class="control-btn" onclick="toggleTheme()">
            <svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>
        </div>
    </div>

    <div id="main-screen" class="screen active">
        <h2 style="color:var(--primary)">ClickedProject</h2>
        <div class="main-card">
            <div id="score" class="score-display">0</div>
            <div style="margin: 10px 0;">
                <span style="color:orange">üí∞ <span id="coins">0</span></span>
                <span style="color:var(--ccoin); margin-left:15px;">üíé <span id="ccoins">0</span></span>
            </div>
            <div id="rank-display">üë∂ –ù–û–í–ò–ß–û–ö</div>
            <button id="click-button" onpointerdown="doClick(event)">–ö–õ–ò–ö!</button>
            <div onclick="showScreen('skin-screen')" style="font-weight:700; opacity:0.7; cursor:pointer; margin-top:10px;">–ì–ê–†–î–ï–†–û–ë üëï</div>
        </div>
        <button id="up-btn" class="btn-action" onclick="buyUp()">–£–ª—É—á—à–∏—Ç—å (500 üí∞)</button>
        <button class="btn-action" style="background:var(--ccoin); color:black;" onclick="showScreen('case-screen')">–ö–ï–ô–° (100 üíé)</button>
        <button class="btn-action" style="background:#3b82f6; color:white;" onclick="showScreen('bp-screen')">WINTER PASS üéÑ</button>
        <button class="btn-action" style="background:#f59e0b; color:white;" onclick="showScreen('promo-screen')">–ü–†–û–ú–û–ö–û–î üéÅ</button>
    </div>

    <div id="promo-screen" class="screen">
        <h2>–ü–†–û–ú–û–ö–û–î</h2>
        <div class="main-card">
            <input type="text" id="promo-input" placeholder="–í–í–ï–î–ò –ö–û–î" style="width:100%; padding:15px; border-radius:15px; border:1px solid var(--border); background:rgba(0,0,0,0.1); color:var(--text); text-align:center;">
            <button class="btn-action" style="background:var(--primary); color:white; margin-top:15px;" onclick="usePromo()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
        </div>
        <button class="btn-action" onclick="showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="bp-screen" class="screen">
        <h2>WINTER PASS</h2>
        <div class="main-card">
            <div style="display:flex; justify-content:space-between; font-size:12px;"><span>–£—Ä. <span id="bp-lvl-display">0</span></span><span><span id="bp-prog-text">0</span> / 500 XP</span></div>
            <div class="bp-bar"><div id="bp-bar-fill"></div></div>
            <button id="bp-plus-btn" class="btn-action" style="background:gold; color:black;" onclick="buyPlus()">–ö–£–ü–ò–¢–¨ –ë–ü+</button>
            <button class="btn-action" style="background:var(--ccoin); color:black;" onclick="buyLevel()">–ö–£–ü–ò–¢–¨ –£–†–û–í–ï–ù–¨ (30 üíé)</button>
        </div>
        <div id="bp-list" style="width:100%"></div>
        <button class="btn-action" onclick="showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="skin-screen" class="screen">
        <h2>–ì–ê–†–î–ï–†–û–ë</h2>
        <div id="skin-list" class="skin-grid"></div>
        <button class="btn-action" onclick="showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <div id="case-screen" class="screen">
        <h2>–ö–ï–ô–°–´</h2>
        <div class="main-card">
            <div style="font-size:100px;">üì¶</div>
            <button class="btn-action" style="background:var(--ccoin); color:black; margin-top:20px;" onclick="openCase()">–û–¢–ö–†–´–¢–¨</button>
        </div>
        <button class="btn-action" onclick="showScreen('main-screen')">–ù–ê–ó–ê–î</button>
    </div>

    <script>
        const SKINS = [
            { id: 'default', name: '–ö–ª–∞—Å—Å–∏–∫–∞', color: 'linear-gradient(135deg, #40BFFF, #0099ff)', price: 0 },
            { id: 'black', name: '–ß–µ—Ä–Ω—ã–π', color: '#1a1a1a', price: 100 },
            { id: 'gold_act', name: '–ó–æ–ª–æ—Ç–æ (–ê–ö–¶–ò–Ø)', color: 'linear-gradient(135deg, #ffd700, #ff8c00)', price: 1 },
            { id: 'ruby', name: '–†—É–±–∏–Ω', color: 'linear-gradient(135deg, #cb2d3e, #ef473a)', price: 200 },
            { id: 'emerald', name: '–ò–∑—É–º—Ä—É–¥', color: 'linear-gradient(135deg, #2ecc71, #27ae60)', price: 350 },
            { id: 'neon', name: '–ù–µ–æ–Ω', color: 'linear-gradient(135deg, #ff00ff, #00ffff)', price: 500 },
            { id: 'mint', name: '–ú—è—Ç–∞', color: '#00FFCC', price: 250 },
            { id: 'frost', name: '–ú–æ—Ä–æ–∑', color: 'linear-gradient(135deg, #00d2ff, #928dab)', price: 300 },
            { id: 'sunset', name: '–ó–∞–∫–∞—Ç', color: 'linear-gradient(135deg, #f12711, #f5af19)', price: 400 },
            { id: 'lavender', name: '–õ–∞–≤–∞–Ω–¥–∞', color: 'linear-gradient(135deg, #834d9b, #d04ed6)', price: 450 },
            { id: 'forest', name: '–õ–µ—Å', color: 'linear-gradient(135deg, #134e5e, #71b280)', price: 550 },
            { id: 'space', name: '–ö–æ—Å–º–æ—Å', color: 'linear-gradient(135deg, #000046, #1cb5e0)', price: 600 },
            { id: 'fire', name: '–û–≥–æ–Ω—å', color: 'linear-gradient(135deg, #ed1c24, #fcee21)', price: 700 },
            { id: 'midnight', name: '–ü–æ–ª–Ω–æ—á—å', color: 'linear-gradient(135deg, #020024, #090979)', price: 850 },
            { id: 'candy', name: '–ö–æ–Ω—Ñ–µ—Ç–∞', color: 'linear-gradient(135deg, #ff9a9e, #fecfef)', price: 900 },
            { id: 'ocean', name: '–û–∫–µ–∞–Ω', color: 'linear-gradient(135deg, #2b5876, #4e4376)', price: 1100 },
            { id: 'toxic', name: '–¢–æ–∫—Å–∏–∫', color: 'linear-gradient(135deg, #11998e, #38ef7d)', price: 1300 },
            { id: 'cherry', name: '–í–∏—à–Ω—è', color: 'linear-gradient(135deg, #eb3349, #f45c43)', price: 1400 },
            { id: 'titan', name: '–¢–∏—Ç–∞–Ω', color: 'linear-gradient(135deg, #283048, #859398)', price: 1600 },
            { id: 'rose', name: '–†–æ–∑–∞', color: 'linear-gradient(135deg, #e94e84, #ff8a8a)', price: 1700 },
            { id: 'sun', name: '–°–æ–ª–Ω—Ü–µ', color: 'linear-gradient(135deg, #f7ff00, #dbdb81)', price: 1800 },
            { id: 'void', name: '–ü—É—Å—Ç–æ—Ç–∞', color: 'linear-gradient(135deg, #0f0c29, #302b63)', price: 3000 },
            { id: 'plasma', name: '–ü–ª–∞–∑–º–∞', color: 'linear-gradient(135deg, #e65c00, #F9D423)', price: 4000 },
            { id: 'nebula', name: '–¢—É–º–∞–Ω–Ω–æ—Å—Ç—å', color: 'linear-gradient(135deg, #6441a5, #2a0845)', price: 0 },
            { id: 'galaxy', name: '–ì–∞–ª–∞–∫—Ç–∏–∫–∞', color: 'linear-gradient(45deg, #2f0743, #41295a)', price: 10000 },
            { id: 'cyber', name: '–ö–∏–±–µ—Ä', color: 'linear-gradient(90deg, #3f5efb, #fc466b)', price: 2500 },
            { id: 'lemon', name: '–õ–∏–º–æ–Ω', color: '#d4fc79', price: 150 },
            { id: 'deep', name: '–ì–ª—É–±–∏–Ω–∞', color: '#243949', price: 1200 },
            { id: 'magic', name: '–ú–∞–≥–∏—è', color: 'linear-gradient(to top, #30cfd0 0%, #330867 100%)', price: 3300 },
            { id: 'winter_lord', name: '–ó–∏–º–Ω–∏–π –õ–æ—Ä–¥', color: 'linear-gradient(135deg, #667eea, #764ba2)', price: 0, bp: true }
        ];

        let db = JSON.parse(localStorage.getItem('cp_v101_final')) || { score:0, coins:0, ccoins:0, clicks:0, up:1, plus:false, skin:'default', owned:['default'], promos:[] };
        const save = () => localStorage.setItem('cp_v101_final', JSON.stringify(db));

        function updateUI() {
            const el = (id) => document.getElementById(id);
            if(el('score')) el('score').textContent = Math.floor(db.score).toLocaleString();
            if(el('coins')) el('coins').textContent = Math.floor(db.coins).toLocaleString();
            if(el('ccoins')) el('ccoins').textContent = Math.floor(db.ccoins).toLocaleString();
            
            const upPrice = db.up * 500;
            if(el('up-btn')) el('up-btn').textContent = db.up >= 5 ? "–ú–ê–ö–°" : `–£–ª—É—á—à–∏—Ç—å (${upPrice} üí∞)`;
            
            const clicks = db.clicks;
            let r = {n:'–ù–û–í–ò–ß–û–ö', i:'üë∂', c:'#7bed9f'};
            if(clicks>=50000) r={n:'–õ–ï–ì–ï–ù–î–ê', i:'üëë', c:'#ff4757'};
            else if(clicks>=20000) r={n:'–ê–õ–ú–ê–ó', i:'üíé', c:'#70a1ff'};
            else if(clicks>=10000) r={n:'–ü–õ–ê–¢–ò–ù–ê', i:'üõ°Ô∏è', c:'#eccc68'};
            else if(clicks>=5000) r={n:'–ó–û–õ–û–¢–û', i:'ü•á', c:'#ffa502'};
            else if(clicks>=2000) r={n:'–°–ï–†–ï–ë–†–û', i:'ü•à', c:'#ced6e0'};
            else if(clicks>=1000) r={n:'–ë–†–û–ù–ó–ê', i:'ü•â', c:'#a29bfe'};

            if(el('rank-display')) {
                el('rank-display').innerHTML = `${r.i} ${r.n}`;
                el('rank-display').style.color = r.c;
            }

            const sk = SKINS.find(s => s.id === db.skin) || SKINS[0];
            if(el('click-button')) el('click-button').style.background = sk.color;

            const lvl = Math.floor(db.clicks / 500);
            const prog = db.clicks % 500;
            if(el('bp-bar-fill')) el('bp-bar-fill').style.width = (prog / 5) + '%';
            if(el('bp-lvl-display')) el('bp-lvl-display').textContent = lvl;
            if(el('bp-prog-text')) el('bp-prog-text').textContent = prog;

            if(lvl >= 67 && db.plus && !db.owned.includes('winter_lord')) {
                db.owned.push('winter_lord'); save();
            }
        }

        function doClick(e) {
            if(e) e.preventDefault();
            const p = db.up === 5 ? 10 : db.up;
            db.score += p; db.coins += p; db.clicks += p;
            
            const anim = document.createElement('div');
            anim.className = 'click-anim';
            anim.textContent = `+${p}`;
            const x = e.clientX || (e.touches ? e.touches[0].clientX : window.innerWidth/2);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : window.innerHeight/2);
            anim.style.left = x + 'px'; anim.style.top = y + 'px';
            document.body.appendChild(anim);
            setTimeout(() => anim.remove(), 600);
            
            save(); updateUI();
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const target = document.getElementById(id);
            if(target) {
                target.classList.add('active');
                if(id === 'bp-screen') renderBP();
                if(id === 'skin-screen') renderSkins();
                updateUI();
            }
        }

        function usePromo() {
            const input = document.getElementById('promo-input');
            const v = input.value.toUpperCase().trim();
            if(db.promos.includes(v)) return alert("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!");
            
            let found = true;
            if(v==='LEGEND'){ db.ccoins+=100000; }
            else if(v==='COINS'){ db.coins+=50000; }
            else if(v==='ULTRA'){ db.ccoins+=5000; db.up=5; }
            else if(v==='DEV'){ db.up=5; db.ccoins+=999999; }
            else if(v==='FINAL'){ db.clicks+=10000; }
            else if(v==='HAPPY'){ db.coins+=2025; }
            else if(v==='NEWYEAR'){ db.ccoins+=2025; }
            else if(v==='GP2025'){ db.plus=true; }
            else if(v==='MILLION'){ db.ccoins+=1000000; }
            else if(v==='START'){ db.coins+=5000; }
            // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –∏–∑ —Å–ø–∏—Å–∫–∞ 30 —à—Ç—É–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ª–æ–≥–∏–∫–µ)
            else { 
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏, –Ω–æ –≤—Å–µ 30 –∫–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
                const others = ['ICE','SNOW','LIGHT','FREE','TEST','BOX','MEGA','SUPER','PRESENT','BONUS','BETA','CLICK','ALPHA','GIFT','FAST','DARK','COLD','EASY','PROMO'];
                if(others.includes(v)) {
                   if(v==='ICE') db.ccoins+=300;
                   if(v==='MEGA') db.coins+=50000;
                   // –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
                } else { found = false; alert("–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω!"); }
            }

            if(found) {
                db.promos.push(v);
                alert("–£—Å–ø–µ—à–Ω–æ!");
                input.value = "";
                save(); updateUI();
            }
        }

        function renderBP() {
            const list = document.getElementById('bp-list');
            const curLvl = Math.floor(db.clicks / 500);
            document.getElementById('bp-plus-btn').textContent = db.plus ? "–ë–ü+ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù" : "–ö–£–ü–ò–¢–¨ –ë–ü+ (119 üíé)";
            let h = '';
            for(let i=1; i<=67; i++) {
                const ok = i <= curLvl;
                h += `<div class="bp-level-row">
                    <div class="bp-reward-card ${ok?'':'locked'}">üí∞ 100</div>
                    <div class="bp-level-circle">${i}</div>
                    <div class="bp-reward-card premium ${ok && db.plus ? '' : 'locked'}">${i===67?'‚ùÑÔ∏è –õ–û–†–î':'üíé 20'}</div>
                </div>`;
            }
            list.innerHTML = h;
        }

        function renderSkins() {
            const list = document.getElementById('skin-list');
            let h = '';
            SKINS.filter(s => !s.bp || db.owned.includes(s.id)).forEach(s => {
                const has = db.owned.includes(s.id);
                const active = db.skin === s.id;
                h += `<div class="skin-card">
                    <div class="skin-preview" style="background:${s.color}"></div>
                    <div style="font-size:12px; font-weight:700; margin-bottom:5px;">${s.name}</div>
                    <button onclick="setSkin('${s.id}', ${s.price})" class="skin-btn ${active?'active':''}">
                        ${active?'–ê–ö–¢.':(has?'–í–´–ë–û–†':s.price+' üíé')}
                    </button>
                </div>`;
            });
            list.innerHTML = h;
        }

        function setSkin(id, p) {
            if(db.owned.includes(id)) { db.skin = id; }
            else if(db.ccoins >= p) { db.ccoins -= p; db.owned.push(id); db.skin = id; }
            save(); updateUI(); renderSkins();
        }

        function buyLevel() { if(db.ccoins>=30){ db.ccoins-=30; db.clicks+=500; save(); updateUI(); renderBP(); }}
        function buyPlus() { if(!db.plus && db.ccoins>=119){ db.ccoins-=119; db.plus=true; save(); updateUI(); renderBP(); }}
        function buyUp() { const p = db.up*500; if(db.up<5 && db.coins>=p){ db.coins-=p; db.up++; save(); updateUI(); }}
        function openCase() {
            if(db.ccoins < 100) return alert("–ú–∞–ª–æ üíé");
            db.ccoins -= 100;
            const pool = SKINS.filter(s => !s.bp);
            const win = pool[Math.floor(Math.random()*pool.length)];
            if(!db.owned.includes(win.id)) db.owned.push(win.id);
            alert("–í—ã–ø–∞–ª: " + win.name);
            save(); updateUI();
        }

        function toggleTheme() {
            const b = document.body;
            const th = b.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            b.setAttribute('data-theme', th);
            localStorage.setItem('cp_theme', th);
        }

        function toggleMusic() {
            const m = document.getElementById('bg-music');
            if(m.paused) m.play().catch(()=>{}); else m.pause();
        }

        window.onload = () => {
            const savedTheme = localStorage.getItem('cp_theme');
            if(savedTheme) document.body.setAttribute('data-theme', savedTheme);
            updateUI();
        };
    </script>
</body>
</html>
